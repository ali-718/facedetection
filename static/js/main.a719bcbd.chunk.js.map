{"version":3,"sources":["OvVideo.js","UserVideoComponent.js","App.js","registerServiceWorker.js","index.js"],"names":["OpenViduVideoComponent","props","videoRef","React","createRef","this","streamManager","addVideoElement","current","controls","muted","autoPlay","ref","Component","UserVideoComponent","JSON","parse","stream","connection","data","clientData","undefined","className","getNicknameTag","OPENVIDU_SERVER_URL","window","location","hostname","App","state","mySessionId","myUserName","Math","floor","random","session","mainStreamManager","publisher","subscribers","joinSession","bind","leaveSession","handleChangeSessionId","handleChangeUserName","handleMainVideoStream","onbeforeunload","addEventListener","removeEventListener","event","e","setState","target","value","index","indexOf","splice","OV","OpenVidu","initSession","mySession","on","subscriber","subscribe","push","deleteSubscriber","exception","console","warn","getToken","then","token","connect","initPublisher","audioSource","videoSource","publishAudio","publishVideo","resolution","frameRate","insertMode","mirror","publish","catch","error","log","code","message","disconnect","id","src","alt","onSubmit","type","onChange","required","name","onClick","length","createSession","sessionId","createToken","Promise","resolve","reject","stringify","customSessionId","axios","post","headers","Authorization","btoa","response","Object","assign","status","confirm","isLocalhost","Boolean","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","render","document","getElementById","URL","process","origin","fetch","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"yTAEqBA,E,kDACnB,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,SAAWC,IAAMC,YAFL,E,sDAKnB,SAAmBH,GACbA,GAAWI,KAAKH,UAClBG,KAAKJ,MAAMK,cAAcC,gBAAgBF,KAAKH,SAASM,W,+BAI3D,WACMH,KAAKJ,OAAWI,KAAKH,UACvBG,KAAKJ,MAAMK,cAAcC,gBAAgBF,KAAKH,SAASM,W,oBAI3D,WACE,OACE,uBACEC,UAAU,EACVC,OAAO,EACPC,UAAU,EACVC,IAAKP,KAAKH,e,GAxBkCW,aCE/BC,G,2KAEjB,WAEI,OAAOC,KAAKC,MAAMX,KAAKJ,MAAMK,cAAcW,OAAOC,WAAWC,MAAMC,a,oBAGvE,WACI,OACI,mCACkCC,IAA7BhB,KAAKJ,MAAMK,cACR,sBAAKgB,UAAU,kBAAf,UACI,cAAC,EAAD,CAAwBhB,cAAeD,KAAKJ,MAAMK,gBAClD,8BAAK,4BAAID,KAAKkB,wBAElB,W,GAf4BV,cCE1CW,EAAsB,WAAaC,OAAOC,SAASC,SAAW,QA6WrDC,E,kDAzWb,WAAY3B,GAAQ,IAAD,8BACjB,cAAMA,IAED4B,MAAQ,CACXC,YAAa,WACbC,WAAY,cAAgBC,KAAKC,MAAsB,IAAhBD,KAAKE,UAC5CC,aAASd,EACTe,uBAAmBf,EACnBgB,eAAWhB,EACXiB,YAAa,IAGf,EAAKC,YAAc,EAAKA,YAAYC,KAAjB,gBACnB,EAAKC,aAAe,EAAKA,aAAaD,KAAlB,gBACpB,EAAKE,sBAAwB,EAAKA,sBAAsBF,KAA3B,gBAC7B,EAAKG,qBAAuB,EAAKA,qBAAqBH,KAA1B,gBAC5B,EAAKI,sBAAwB,EAAKA,sBAAsBJ,KAA3B,gBAC7B,EAAKK,eAAiB,EAAKA,eAAeL,KAApB,gBAjBL,E,qDAoBnB,WACEf,OAAOqB,iBAAiB,eAAgBzC,KAAKwC,kB,kCAG/C,WACEpB,OAAOsB,oBAAoB,eAAgB1C,KAAKwC,kB,4BAGlD,SAAeG,GACb3C,KAAKoC,iB,mCAGP,SAAsBQ,GACpB5C,KAAK6C,SAAS,CACZpB,YAAamB,EAAEE,OAAOC,U,kCAI1B,SAAqBH,GACnB5C,KAAK6C,SAAS,CACZnB,WAAYkB,EAAEE,OAAOC,U,mCAIzB,SAAsBnC,GAChBZ,KAAKwB,MAAMO,oBAAsBnB,GACnCZ,KAAK6C,SAAS,CACZd,kBAAmBnB,M,8BAKzB,SAAiBX,GACf,IAAIgC,EAAcjC,KAAKwB,MAAMS,YACzBe,EAAQf,EAAYgB,QAAQhD,EAAe,GAC3C+C,GAAS,IACXf,EAAYiB,OAAOF,EAAO,GAC1BhD,KAAK6C,SAAS,CACZZ,YAAaA,O,yBAKnB,WAAe,IAAD,OAGZjC,KAAKmD,GAAK,IAAIC,WAIdpD,KAAK6C,SACH,CACEf,QAAS9B,KAAKmD,GAAGE,gBAEnB,WACE,IAAIC,EAAY,EAAK9B,MAAMM,QAK3BwB,EAAUC,GAAG,iBAAiB,SAACZ,GAG7B,IAAIa,EAAaF,EAAUG,UAAUd,EAAM/B,YAAQI,GAC/CiB,EAAc,EAAKT,MAAMS,YAC7BA,EAAYyB,KAAKF,GAGjB,EAAKX,SAAS,CACZZ,YAAaA,OAKjBqB,EAAUC,GAAG,mBAAmB,SAACZ,GAE/B,EAAKgB,iBAAiBhB,EAAM/B,OAAOX,kBAIrCqD,EAAUC,GAAG,aAAa,SAACK,GACzBC,QAAQC,KAAKF,MAOf,EAAKG,WAAWC,MAAK,SAACC,GAGpBX,EACGY,QAAQD,EAAO,CAAElD,WAAY,EAAKS,MAAME,aACxCsC,MAAK,WAKJ,IAAIhC,EAAY,EAAKmB,GAAGgB,mBAAcnD,EAAW,CAC/CoD,iBAAapD,EACbqD,iBAAarD,EACbsD,cAAc,EACdC,cAAc,EACdC,WAAY,UACZC,UAAW,GACXC,WAAY,SACZC,QAAQ,IAIV3C,EAAUuC,cAAa,GACvBjB,EAAUsB,QAAQ5C,GAGlB,EAAKa,SAAS,CACZd,kBAAmBC,EACnBA,UAAWA,OAGd6C,OAAM,SAACC,GACNjB,QAAQkB,IACN,gDACAD,EAAME,KACNF,EAAMG,oB,0BAQpB,WAGE,IAAM3B,EAAYtD,KAAKwB,MAAMM,QAEzBwB,GACFA,EAAU4B,aAIZlF,KAAKmD,GAAK,KACVnD,KAAK6C,SAAS,CACZf,aAASd,EACTiB,YAAa,GACbR,YAAa,WACbC,WAAY,cAAgBC,KAAKC,MAAsB,IAAhBD,KAAKE,UAC5CE,uBAAmBf,EACnBgB,eAAWhB,M,oBAIf,WAAU,IAAD,EACDS,EAAczB,KAAKwB,MAAMC,YACzBC,EAAa1B,KAAKwB,MAAME,WAE9B,OACE,sBAAKT,UAAU,YAAf,eAC0BD,IAAvBhB,KAAKwB,MAAMM,QACV,sBAAKqD,GAAG,OAAR,UACE,qBAAKA,GAAG,UAAR,SACE,qBACEC,IAAI,uDACJC,IAAI,oBAGR,sBAAKF,GAAG,cAAclE,UAAU,4BAAhC,UACE,wDACA,uBAAMA,UAAU,aAAaqE,SAAUtF,KAAKkC,YAA5C,UACE,8BACE,kDACA,uBACEjB,UAAU,eACVsE,KAAK,OACLJ,GAAG,WACHpC,MAAOrB,EACP8D,SAAUxF,KAAKsC,qBACfmD,UAAQ,OAGZ,8BACE,+CACA,uBACExE,UAAU,eACVsE,KAAK,OACLJ,GAAG,YACHpC,MAAOtB,EACP+D,SAAUxF,KAAKqC,sBACfoD,UAAQ,OAGZ,mBAAGxE,UAAU,cAAb,SACE,uBACEA,UAAU,yBACVyE,KAAK,SACLH,KAAK,SACLxC,MAAM,oBAMd,UAEoB/B,IAAvBhB,KAAKwB,MAAMM,QACV,sBAAKqD,GAAG,UAAR,UACE,sBAAKA,GAAG,iBAAR,UACE,oBAAIA,GAAG,gBAAP,SAAwB1D,IACxB,uBACER,UAAU,2BACVsE,KAAK,SACLJ,GAAG,qBACHQ,QAAS3F,KAAKoC,aACdW,MAAM,0BAIwB/B,IAAjChB,KAAKwB,MAAMO,kBACV,qBAAKoD,GAAG,aAAalE,UAAU,WAA/B,SACE,cAAC,EAAD,CACEhB,cAAeD,KAAKwB,MAAMO,sBAG5B,KACJ,qBAAKoD,GAAG,kBAAkBlE,UAAU,WAApC,SAoBE,sDAAejB,KAAKwB,MAAMS,mBAA1B,aAAe,EAAwB2D,eAGzC,U,sBAiBV,WAAY,IAAD,OACT,OAAO5F,KAAK6F,cAAc7F,KAAKwB,MAAMC,aAAauC,MAAK,SAAC8B,GAAD,OACrD,EAAKC,YAAYD,Q,2BAIrB,SAAcA,GACZ,OAAO,IAAIE,SAAQ,SAACC,EAASC,GAC3B,IAAIpF,EAAOJ,KAAKyF,UAAU,CAAEC,gBAAiBN,IAC7CO,IACGC,KAAKnF,EAAsB,yBAA0BL,EAAM,CAC1DyF,QAAS,CACPC,cACE,SAAWC,KAAK,yBAClB,eAAgB,sBAGnBzC,MAAK,SAAC0C,GACL7C,QAAQkB,IAAI,gBAAiB2B,GAC7BT,EAAQS,EAAS5F,KAAKqE,OAEvBN,OAAM,SAAC6B,GAAc,IAAD,EACf5B,EAAQ6B,OAAOC,OAAO,GAAIF,GACE,OAAvB,OAAL5B,QAAK,IAALA,GAAA,UAAAA,EAAO4B,gBAAP,eAAiBG,QACnBZ,EAAQH,IAERjC,QAAQkB,IAAID,GACZjB,QAAQC,KACN,wEACE3C,GAGFC,OAAO0F,QACL,yEACE3F,EADF,2IAIEA,EACA,MAGJC,OAAOC,SAASuF,OACdzF,EAAsB,gC,yBAQpC,SAAY2E,GACV,OAAO,IAAIE,SAAQ,SAACC,EAASC,GAE3BG,IACGC,KACCnF,EACE,0BACA2E,EACA,cANK,GAQP,CACES,QAAS,CACPC,cACE,SAAWC,KAAK,yBAClB,eAAgB,sBAIrBzC,MAAK,SAAC0C,GACL7C,QAAQkB,IAAI,QAAS2B,GACrBT,EAAQS,EAAS5F,KAAKmD,UAEvBY,OAAM,SAACC,GAAD,OAAWoB,EAAOpB,a,GArWftE,aCCZuG,EAAcC,QACW,cAA7B5F,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAAS2F,MACvB,2DAsCN,SAASC,EAAgBC,GACvBC,UAAUC,cACPC,SAASH,GACTnD,MAAK,SAAAuD,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACtCD,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBjG,QACf4F,UAAUC,cAAcO,WAK1B/D,QAAQkB,IAAI,6CAKZlB,QAAQkB,IAAI,4CAMrBF,OAAM,SAAAC,GACLjB,QAAQiB,MAAM,4CAA6CA,MCzEjE+C,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,SDclC,WACb,GAA6C,kBAAmBZ,UAAW,CAGzE,GADkB,IAAIa,IAAIC,iBAAwB9G,OAAOC,UAC3C8G,SAAW/G,OAAOC,SAAS8G,OAIvC,OAGF/G,OAAOqB,iBAAiB,QAAQ,WAC9B,IAAM0E,EAAK,UAAMe,iBAAN,sBAEPnB,IAiDV,SAAiCI,GAE/BiB,MAAMjB,GACHnD,MAAK,SAAA0C,GAGkB,MAApBA,EAASG,SACuD,IAAhEH,EAASH,QAAQ8B,IAAI,gBAAgBpF,QAAQ,cAG7CmE,UAAUC,cAAciB,MAAMtE,MAAK,SAAAuD,GACjCA,EAAagB,aAAavE,MAAK,WAC7B5C,OAAOC,SAASmH,eAKpBtB,EAAgBC,MAGnBtC,OAAM,WACLhB,QAAQkB,IACN,oEArEA0D,CAAwBtB,GAIxBC,UAAUC,cAAciB,MAAMtE,MAAK,WACjCH,QAAQkB,IACN,gHAMJmC,EAAgBC,OCzCxBuB,I","file":"static/js/main.a719bcbd.chunk.js","sourcesContent":["import React, { Component } from \"react\";\n\nexport default class OpenViduVideoComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.videoRef = React.createRef();\n  }\n\n  componentDidUpdate(props) {\n    if (props && !!this.videoRef) {\n      this.props.streamManager.addVideoElement(this.videoRef.current);\n    }\n  }\n\n  componentDidMount() {\n    if (this.props && !!this.videoRef) {\n      this.props.streamManager.addVideoElement(this.videoRef.current);\n    }\n  }\n\n  render() {\n    return (\n      <video\n        controls={false}\n        muted={false}\n        autoPlay={true}\n        ref={this.videoRef}\n      />\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport OpenViduVideoComponent from './OvVideo';\nimport './UserVideo.css';\n\nexport default class UserVideoComponent extends Component {\n\n    getNicknameTag() {\n        // Gets the nickName of the user\n        return JSON.parse(this.props.streamManager.stream.connection.data).clientData;\n    }\n\n    render() {\n        return (\n            <div>\n                {this.props.streamManager !== undefined ? (\n                    <div className=\"streamcomponent\">\n                        <OpenViduVideoComponent streamManager={this.props.streamManager} />\n                        <div><p>{this.getNicknameTag()}</p></div>\n                    </div>\n                ) : null}\n            </div>\n        );\n    }\n}\n","import axios from \"axios\";\nimport { OpenVidu } from \"openvidu-browser\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport UserVideoComponent from \"./UserVideoComponent\";\n\nconst OPENVIDU_SERVER_URL = \"https://\" + window.location.hostname + \":4443\";\nconst OPENVIDU_SERVER_SECRET = \"MY_SECRET\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      mySessionId: \"SessionA\",\n      myUserName: \"Participant\" + Math.floor(Math.random() * 100),\n      session: undefined,\n      mainStreamManager: undefined,\n      publisher: undefined,\n      subscribers: [],\n    };\n\n    this.joinSession = this.joinSession.bind(this);\n    this.leaveSession = this.leaveSession.bind(this);\n    this.handleChangeSessionId = this.handleChangeSessionId.bind(this);\n    this.handleChangeUserName = this.handleChangeUserName.bind(this);\n    this.handleMainVideoStream = this.handleMainVideoStream.bind(this);\n    this.onbeforeunload = this.onbeforeunload.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"beforeunload\", this.onbeforeunload);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"beforeunload\", this.onbeforeunload);\n  }\n\n  onbeforeunload(event) {\n    this.leaveSession();\n  }\n\n  handleChangeSessionId(e) {\n    this.setState({\n      mySessionId: e.target.value,\n    });\n  }\n\n  handleChangeUserName(e) {\n    this.setState({\n      myUserName: e.target.value,\n    });\n  }\n\n  handleMainVideoStream(stream) {\n    if (this.state.mainStreamManager !== stream) {\n      this.setState({\n        mainStreamManager: stream,\n      });\n    }\n  }\n\n  deleteSubscriber(streamManager) {\n    let subscribers = this.state.subscribers;\n    let index = subscribers.indexOf(streamManager, 0);\n    if (index > -1) {\n      subscribers.splice(index, 1);\n      this.setState({\n        subscribers: subscribers,\n      });\n    }\n  }\n\n  joinSession() {\n    // --- 1) Get an OpenVidu object ---\n\n    this.OV = new OpenVidu();\n\n    // --- 2) Init a session ---\n\n    this.setState(\n      {\n        session: this.OV.initSession(),\n      },\n      () => {\n        var mySession = this.state.session;\n\n        // --- 3) Specify the actions when events take place in the session ---\n\n        // On every new Stream received...\n        mySession.on(\"streamCreated\", (event) => {\n          // Subscribe to the Stream to receive it. Second parameter is undefined\n          // so OpenVidu doesn't create an HTML video by its own\n          var subscriber = mySession.subscribe(event.stream, undefined);\n          var subscribers = this.state.subscribers;\n          subscribers.push(subscriber);\n\n          // Update the state with the new subscribers\n          this.setState({\n            subscribers: subscribers,\n          });\n        });\n\n        // On every Stream destroyed...\n        mySession.on(\"streamDestroyed\", (event) => {\n          // Remove the stream from 'subscribers' array\n          this.deleteSubscriber(event.stream.streamManager);\n        });\n\n        // On every asynchronous exception...\n        mySession.on(\"exception\", (exception) => {\n          console.warn(exception);\n        });\n\n        // --- 4) Connect to the session with a valid user token ---\n\n        // 'getToken' method is simulating what your server-side should do.\n        // 'token' parameter should be retrieved and returned by your own backend\n        this.getToken().then((token) => {\n          // First param is the token got from OpenVidu Server. Second param can be retrieved by every user on event\n          // 'streamCreated' (property Stream.connection.data), and will be appended to DOM as the user's nickname\n          mySession\n            .connect(token, { clientData: this.state.myUserName })\n            .then(() => {\n              // --- 5) Get your own camera stream ---\n\n              // Init a publisher passing undefined as targetElement (we don't want OpenVidu to insert a video\n              // element: we will manage it on our own) and with the desired properties\n              let publisher = this.OV.initPublisher(undefined, {\n                audioSource: undefined, // The source of audio. If undefined default microphone\n                videoSource: undefined, // The source of video. If undefined default webcam\n                publishAudio: true, // Whether you want to start publishing with your audio unmuted or not\n                publishVideo: true, // Whether you want to start publishing with your video enabled or not\n                resolution: \"640x480\", // The resolution of your video\n                frameRate: 30, // The frame rate of your video\n                insertMode: \"APPEND\", // How the video is inserted in the target element 'video-container'\n                mirror: false, // Whether to mirror your local video or not\n              });\n\n              // --- 6) Publish your stream ---\n              publisher.publishVideo(true);\n              mySession.publish(publisher);\n\n              // Set the main video in the page to display our webcam and store our Publisher\n              this.setState({\n                mainStreamManager: publisher,\n                publisher: publisher,\n              });\n            })\n            .catch((error) => {\n              console.log(\n                \"There was an error connecting to the session:\",\n                error.code,\n                error.message\n              );\n            });\n        });\n      }\n    );\n  }\n\n  leaveSession() {\n    // --- 7) Leave the session by calling 'disconnect' method over the Session object ---\n\n    const mySession = this.state.session;\n\n    if (mySession) {\n      mySession.disconnect();\n    }\n\n    // Empty all properties...\n    this.OV = null;\n    this.setState({\n      session: undefined,\n      subscribers: [],\n      mySessionId: \"SessionA\",\n      myUserName: \"Participant\" + Math.floor(Math.random() * 100),\n      mainStreamManager: undefined,\n      publisher: undefined,\n    });\n  }\n\n  render() {\n    const mySessionId = this.state.mySessionId;\n    const myUserName = this.state.myUserName;\n\n    return (\n      <div className=\"container\">\n        {this.state.session === undefined ? (\n          <div id=\"join\">\n            <div id=\"img-div\">\n              <img\n                src=\"resources/images/openvidu_grey_bg_transp_cropped.png\"\n                alt=\"OpenVidu logo\"\n              />\n            </div>\n            <div id=\"join-dialog\" className=\"jumbotron vertical-center\">\n              <h1> Join a video session </h1>\n              <form className=\"form-group\" onSubmit={this.joinSession}>\n                <p>\n                  <label>Participant: </label>\n                  <input\n                    className=\"form-control\"\n                    type=\"text\"\n                    id=\"userName\"\n                    value={myUserName}\n                    onChange={this.handleChangeUserName}\n                    required\n                  />\n                </p>\n                <p>\n                  <label> Session: </label>\n                  <input\n                    className=\"form-control\"\n                    type=\"text\"\n                    id=\"sessionId\"\n                    value={mySessionId}\n                    onChange={this.handleChangeSessionId}\n                    required\n                  />\n                </p>\n                <p className=\"text-center\">\n                  <input\n                    className=\"btn btn-lg btn-success\"\n                    name=\"commit\"\n                    type=\"submit\"\n                    value=\"JOIN\"\n                  />\n                </p>\n              </form>\n            </div>\n          </div>\n        ) : null}\n\n        {this.state.session !== undefined ? (\n          <div id=\"session\">\n            <div id=\"session-header\">\n              <h1 id=\"session-title\">{mySessionId}</h1>\n              <input\n                className=\"btn btn-large btn-danger\"\n                type=\"button\"\n                id=\"buttonLeaveSession\"\n                onClick={this.leaveSession}\n                value=\"Leave session\"\n              />\n            </div>\n\n            {this.state.mainStreamManager !== undefined ? (\n              <div id=\"main-video\" className=\"col-md-6\">\n                <UserVideoComponent\n                  streamManager={this.state.mainStreamManager}\n                />\n              </div>\n            ) : null}\n            <div id=\"video-container\" className=\"col-md-6\">\n              {/* {this.state.publisher !== undefined ? (\n                <div\n                  className=\"stream-container col-md-6 col-xs-6\"\n                  onClick={() =>\n                    this.handleMainVideoStream(this.state.publisher)\n                  }\n                >\n                  <UserVideoComponent streamManager={this.state.publisher} />\n                </div>\n              ) : null} */}\n              {/* {this.state.subscribers.map((sub, i) => (\n                <div\n                  key={i}\n                  className=\"stream-container col-md-6 col-xs-6\"\n                  onClick={() => this.handleMainVideoStream(sub)}\n                >\n                  <UserVideoComponent streamManager={sub} />\n                </div>\n              ))} */}\n              <p>viewers :- {this.state.subscribers?.length}</p>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n\n  /**\n   * --------------------------\n   * SERVER-SIDE RESPONSIBILITY\n   * --------------------------\n   * These methods retrieve the mandatory user token from OpenVidu Server.\n   * This behavior MUST BE IN YOUR SERVER-SIDE IN PRODUCTION (by using\n   * the API REST, openvidu-java-client or openvidu-node-client):\n   *   1) Initialize a Session in OpenVidu Server\t(POST /openvidu/api/sessions)\n   *   2) Create a Connection in OpenVidu Server (POST /openvidu/api/sessions/<SESSION_ID>/connection)\n   *   3) The Connection.token must be consumed in Session.connect() method\n   */\n\n  getToken() {\n    return this.createSession(this.state.mySessionId).then((sessionId) =>\n      this.createToken(sessionId)\n    );\n  }\n\n  createSession(sessionId) {\n    return new Promise((resolve, reject) => {\n      var data = JSON.stringify({ customSessionId: sessionId });\n      axios\n        .post(OPENVIDU_SERVER_URL + \"/openvidu/api/sessions\", data, {\n          headers: {\n            Authorization:\n              \"Basic \" + btoa(\"OPENVIDUAPP:\" + OPENVIDU_SERVER_SECRET),\n            \"Content-Type\": \"application/json\",\n          },\n        })\n        .then((response) => {\n          console.log(\"CREATE SESION\", response);\n          resolve(response.data.id);\n        })\n        .catch((response) => {\n          var error = Object.assign({}, response);\n          if (error?.response?.status === 409) {\n            resolve(sessionId);\n          } else {\n            console.log(error);\n            console.warn(\n              \"No connection to OpenVidu Server. This may be a certificate error at \" +\n                OPENVIDU_SERVER_URL\n            );\n            if (\n              window.confirm(\n                'No connection to OpenVidu Server. This may be a certificate error at \"' +\n                  OPENVIDU_SERVER_URL +\n                  '\"\\n\\nClick OK to navigate and accept it. ' +\n                  'If no certificate warning is shown, then check that your OpenVidu Server is up and running at \"' +\n                  OPENVIDU_SERVER_URL +\n                  '\"'\n              )\n            ) {\n              window.location.assign(\n                OPENVIDU_SERVER_URL + \"/accept-certificate\"\n              );\n            }\n          }\n        });\n    });\n  }\n\n  createToken(sessionId) {\n    return new Promise((resolve, reject) => {\n      var data = {};\n      axios\n        .post(\n          OPENVIDU_SERVER_URL +\n            \"/openvidu/api/sessions/\" +\n            sessionId +\n            \"/connection\",\n          data,\n          {\n            headers: {\n              Authorization:\n                \"Basic \" + btoa(\"OPENVIDUAPP:\" + OPENVIDU_SERVER_SECRET),\n              \"Content-Type\": \"application/json\",\n            },\n          }\n        )\n        .then((response) => {\n          console.log(\"TOKEN\", response);\n          resolve(response.data.token);\n        })\n        .catch((error) => reject(error));\n    });\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}